import{r as s,U as m,u as g,j as e}from"./index-BBJ5OlNa.js";import{g as j,d as v,c as y,a as C}from"./index.esm2017-DsPuRcLz.js";const N=s.memo(()=>{var n;const{user:r}=s.useContext(m),{showCategory:t}=s.useContext(p),a=g(),[c,d]=s.useState([]);s.useEffect(()=>{(async()=>{try{const o=j(),l=r.uid,u=v(y(o,"images"),l),x=await C(u);if(x.exists()){const f=x.data()[t]||[];d([{category:t,images:f}])}}catch(o){console.error("Error checking saved status",o)}})()},[t,r]);const i=s.useMemo(()=>()=>a(`/library?category=${t}`),[a,t]);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"library-preview-card",onClick:i,children:((n=c[0])==null?void 0:n.images.length)===0?e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("p",{children:"Nothing to show...yet! Create your first libraries."})}):c.map((h,o)=>e.jsx("div",{className:"category-card pointer",children:e.jsx("div",{className:"image-grid",children:h.images.splice(0,1).map(l=>e.jsx("div",{className:"library-container",children:e.jsx("img",{src:l.url,alt:"Saved"})},l.id))})},o))})})}),p=s.createContext(),F=()=>{const{user:r}=s.useContext(m),t=g(),[a,c]=s.useState("saved"),d=()=>{t("/editProfile")},i=n=>{c(n)};return e.jsx(p.Provider,{value:{showCategory:a,toggleCategory:i},children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"perfil-header",children:e.jsxs("div",{className:"perfil-info",children:[e.jsx("img",{src:r.photoURL,alt:"Foto de perfil",className:"perfil-photo",style:{width:120,height:120}}),e.jsx("div",{className:"perfil-section",children:e.jsx("h3",{children:r.email})}),e.jsxs("div",{className:"perfil-section",children:[e.jsx("h3",{children:r.displayName}),e.jsx("button",{className:"mt-2 rounded-4 p-2 fs-6 fw-bold",variant:"secondary",onClick:d,children:"Editar perfil"})]})]})}),e.jsxs("div",{className:"perfil-library",children:[e.jsxs("div",{className:"perfil-section d-flex w-100 justify-content-center gap-5",children:[e.jsx("h3",{className:`pointer ${a==="saved"?"text-decoration-underline":""}`,onClick:()=>i("saved"),children:"Saved"}),e.jsx("h3",{className:`pointer ${a!=="saved"?"text-decoration-underline":""}`,onClick:()=>i("library"),children:"Library"})]}),e.jsx(N,{})]})]})})};export{p as CategoryContext,F as default};
