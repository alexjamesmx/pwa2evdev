var $e=Object.defineProperty;var Fe=(N,a,p)=>a in N?$e(N,a,{enumerable:!0,configurable:!0,writable:!0,value:p}):N[a]=p;var Te=(N,a,p)=>(Fe(N,typeof a!="symbol"?a+"":a,p),p);import{r as Z,U as Ve,j as O,a as Ye,R as Ae,B as Ge}from"./index-BBJ5OlNa.js";import{g as Me,d as De,c as Ne,u as Be,b as Xe,e as Je,a as Ke}from"./index.esm2017-DsPuRcLz.js";import{P as ie}from"./index-CfA_VwZE.js";const Qe=Z.memo(({id:N,srcImage:a,show:p,onHide:A})=>{const{user:f}=Z.useContext(Ve),[d,s]=Z.useState(!1);return Z.useEffect(()=>{(async()=>{try{if(!f||!N)return;const E=Me(),M=f.uid,v=De(Ne(E,"images"),M),S=await Ke(v);if(S.exists()){const B=S.data().saved||[];console.log("check saved satus data");const L=B.some(te=>te.id===N);s(L)}}catch(E){console.error("Error checking saved status:",E)}})()},[f,N]),Z.useMemo(()=>async()=>{try{if(!f||!N||!a)return;const _=Me(),E=f.uid,M=De(Ne(_,"images"),E),v={url:a,id:N};d?(await Be(M,{saved:Xe(v)}),s(!1)):(await Be(M,{saved:Je(v)}),s(!0))}catch(_){console.error("Error toggling save:",_)}},[f,N,a,d]),O.jsxs(O.Fragment,{children:[O.jsx("button",{"data-modal-target":"default-modal","data-modal-toggle":"default-modal",class:"block text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button",children:"Toggle modal"}),O.jsx("div",{id:"default-modal",tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:O.jsx("div",{class:"relative p-4 w-full max-w-2xl max-h-full",children:O.jsxs("div",{class:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[O.jsxs("div",{class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[O.jsx("h3",{class:"text-xl font-semibold text-gray-900 dark:text-white",children:"Terms of Service"}),O.jsxs("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"default-modal",children:[O.jsx("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:O.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),O.jsx("span",{class:"sr-only",children:"Close modal"})]})]}),O.jsxs("div",{class:"p-4 md:p-5 space-y-4",children:[O.jsx("p",{class:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"With less than a month to go before the European Union enacts new consumer privacy laws for its citizens, companies around the world are updating their terms of service agreements to comply."}),O.jsx("p",{class:"text-base leading-relaxed text-gray-500 dark:text-gray-400",children:"The European Unionâ€™s General Data Protection Regulation (G.D.P.R.) goes into effect on May 25 and is meant to ensure a common set of data rights in the European Union. It requires organizations to notify users as soon as possible of high-risk data breaches that could personally affect them."})]}),O.jsxs("div",{class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[O.jsx("button",{"data-modal-hide":"default-modal",type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"I accept"}),O.jsx("button",{"data-modal-hide":"default-modal",type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Decline"})]})]})})})]})});var We={exports:{}};(()=>{var N={296:(f,d,s)=>{var _=/^\s+|\s+$/g,E=/^[-+]0x[0-9a-f]+$/i,M=/^0b[01]+$/i,v=/^0o[0-7]+$/i,S=parseInt,ee=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,B=typeof self=="object"&&self&&self.Object===Object&&self,L=ee||B||Function("return this")(),te=Object.prototype.toString,G=Math.max,pe=Math.min,le=function(){return L.Date.now()};function se(g){var T=typeof g;return!!g&&(T=="object"||T=="function")}function de(g){if(typeof g=="number")return g;if(function(y){return typeof y=="symbol"||function(k){return!!k&&typeof k=="object"}(y)&&te.call(y)=="[object Symbol]"}(g))return NaN;if(se(g)){var T=typeof g.valueOf=="function"?g.valueOf():g;g=se(T)?T+"":T}if(typeof g!="string")return g===0?g:+g;g=g.replace(_,"");var X=M.test(g);return X||v.test(g)?S(g.slice(2),X?2:8):E.test(g)?NaN:+g}f.exports=function(g,T,X){var y,k,U,I,R,J,H=0,re=!1,K=!1,ae=!0;if(typeof g!="function")throw new TypeError("Expected a function");function oe(V){var W=y,$=k;return y=k=void 0,H=V,I=g.apply($,W)}function ce(V){var W=V-J;return J===void 0||W>=T||W<0||K&&V-H>=U}function D(){var V=le();if(ce(V))return ne(V);R=setTimeout(D,function(W){var $=T-(W-J);return K?pe($,U-(W-H)):$}(V))}function ne(V){return R=void 0,ae&&y?oe(V):(y=k=void 0,I)}function q(){var V=le(),W=ce(V);if(y=arguments,k=this,J=V,W){if(R===void 0)return function($){return H=$,R=setTimeout(D,T),re?oe($):I}(J);if(K)return R=setTimeout(D,T),oe(J)}return R===void 0&&(R=setTimeout(D,T)),I}return T=de(T)||0,se(X)&&(re=!!X.leading,U=(K="maxWait"in X)?G(de(X.maxWait)||0,T):U,ae="trailing"in X?!!X.trailing:ae),q.cancel=function(){R!==void 0&&clearTimeout(R),H=0,y=J=k=R=void 0},q.flush=function(){return R===void 0?I:ne(le())},q}},96:(f,d,s)=>{var _="Expected a function",E=NaN,M="[object Symbol]",v=/^\s+|\s+$/g,S=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,B=/^0o[0-7]+$/i,L=parseInt,te=typeof s.g=="object"&&s.g&&s.g.Object===Object&&s.g,G=typeof self=="object"&&self&&self.Object===Object&&self,pe=te||G||Function("return this")(),le=Object.prototype.toString,se=Math.max,de=Math.min,g=function(){return pe.Date.now()};function T(y){var k=typeof y;return!!y&&(k=="object"||k=="function")}function X(y){if(typeof y=="number")return y;if(function(I){return typeof I=="symbol"||function(R){return!!R&&typeof R=="object"}(I)&&le.call(I)==M}(y))return E;if(T(y)){var k=typeof y.valueOf=="function"?y.valueOf():y;y=T(k)?k+"":k}if(typeof y!="string")return y===0?y:+y;y=y.replace(v,"");var U=ee.test(y);return U||B.test(y)?L(y.slice(2),U?2:8):S.test(y)?E:+y}f.exports=function(y,k,U){var I=!0,R=!0;if(typeof y!="function")throw new TypeError(_);return T(U)&&(I="leading"in U?!!U.leading:I,R="trailing"in U?!!U.trailing:R),function(J,H,re){var K,ae,oe,ce,D,ne,q=0,V=!1,W=!1,$=!0;if(typeof J!="function")throw new TypeError(_);function ve(F){var Q=K,fe=ae;return K=ae=void 0,q=F,ce=J.apply(fe,Q)}function ge(F){var Q=F-ne;return ne===void 0||Q>=H||Q<0||W&&F-q>=oe}function ue(){var F=g();if(ge(F))return we(F);D=setTimeout(ue,function(Q){var fe=H-(Q-ne);return W?de(fe,oe-(Q-q)):fe}(F))}function we(F){return D=void 0,$&&K?ve(F):(K=ae=void 0,ce)}function he(){var F=g(),Q=ge(F);if(K=arguments,ae=this,ne=F,Q){if(D===void 0)return function(fe){return q=fe,D=setTimeout(ue,H),V?ve(fe):ce}(ne);if(W)return D=setTimeout(ue,H),ve(ne)}return D===void 0&&(D=setTimeout(ue,H)),ce}return H=X(H)||0,T(re)&&(V=!!re.leading,oe=(W="maxWait"in re)?se(X(re.maxWait)||0,H):oe,$="trailing"in re?!!re.trailing:$),he.cancel=function(){D!==void 0&&clearTimeout(D),q=0,K=ne=ae=D=void 0},he.flush=function(){return D===void 0?ce:we(g())},he}(y,k,{leading:I,maxWait:k,trailing:R})}},703:(f,d,s)=>{var _=s(414);function E(){}function M(){}M.resetWarningCache=E,f.exports=function(){function v(B,L,te,G,pe,le){if(le!==_){var se=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw se.name="Invariant Violation",se}}function S(){return v}v.isRequired=v;var ee={array:v,bigint:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:S,element:v,elementType:v,instanceOf:S,node:v,objectOf:S,oneOf:S,oneOfType:S,shape:S,exact:S,checkPropTypes:M,resetWarningCache:E};return ee.PropTypes=ee,ee}},697:(f,d,s)=>{f.exports=s(703)()},414:f=>{f.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},a={};function p(f){var d=a[f];if(d!==void 0)return d.exports;var s=a[f]={exports:{}};return N[f](s,s.exports,p),s.exports}p.n=f=>{var d=f&&f.__esModule?()=>f.default:()=>f;return p.d(d,{a:d}),d},p.d=(f,d)=>{for(var s in d)p.o(d,s)&&!p.o(f,s)&&Object.defineProperty(f,s,{enumerable:!0,get:d[s]})},p.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),p.o=(f,d)=>Object.prototype.hasOwnProperty.call(f,d),p.r=f=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})};var A={};(()=>{p.r(A),p.d(A,{LazyLoadComponent:()=>Ee,LazyLoadImage:()=>qe,trackWindowScroll:()=>ne});const f=Z;var d=p.n(f),s=p(697);const _=Ye;var E=p.n(_);function M(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function v(o){return v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(o)}function S(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(o,h).enumerable})),n.push.apply(n,i)}return n}function ee(o,e,n){return(e=L(e))in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function B(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,L(i.key),i)}}function L(o){var e=function(n,i){if(v(n)!=="object"||n===null)return n;var h=n[Symbol.toPrimitive];if(h!==void 0){var b=h.call(n,"string");if(v(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(o);return v(e)==="symbol"?e:String(e)}function te(o,e){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},te(o,e)}function G(o){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(o)}var pe=function(o){o.forEach(function(e){e.isIntersecting&&e.target.onVisible()})},le={},se=function(o){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&te(t,r)})(w,o);var e,n,i,h,b=(i=w,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,r=G(i);if(h){var u=G(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(c,l){if(l&&(v(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(c)}(this,t)});function w(t){var r;if(function(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}(this,w),(r=b.call(this,t)).supportsObserver=!t.scrollPosition&&t.useIntersectionObserver&&M(),r.supportsObserver){var u=t.threshold;r.observer=function(c){return le[c]=le[c]||new IntersectionObserver(pe,{rootMargin:c+"px"}),le[c]}(u)}return r}return e=w,n=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,r=this.placeholder.getBoundingClientRect(),u=E().findDOMNode(this.placeholder).style,c=parseInt(u.getPropertyValue("margin-left"),10)||0,l=parseInt(u.getPropertyValue("margin-top"),10)||0;return{bottom:t.y+r.bottom+l,left:t.x+r.left+c,right:t.x+r.right+c,top:t.y+r.top+l}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var t=this.props,r=t.scrollPosition,u=t.threshold,c=this.getPlaceholderBoundingBox(r),l=r.y+window.innerHeight,m=r.x,j=r.x+window.innerWidth,x=r.y;return x-u<=c.bottom&&l+u>=c.top&&m-u<=c.right&&j+u>=c.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var t=this,r=this.props,u=r.className,c=r.height,l=r.placeholder,m=r.style,j=r.width;if(l&&typeof l.type!="function")return d().cloneElement(l,{ref:function(P){return t.placeholder=P}});var x=function(P){for(var z=1;z<arguments.length;z++){var C=arguments[z]!=null?arguments[z]:{};z%2?S(Object(C),!0).forEach(function(Y){ee(P,Y,C[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(P,Object.getOwnPropertyDescriptors(C)):S(Object(C)).forEach(function(Y){Object.defineProperty(P,Y,Object.getOwnPropertyDescriptor(C,Y))})}return P}({display:"inline-block"},m);return j!==void 0&&(x.width=j),c!==void 0&&(x.height=c),d().createElement("span",{className:u,ref:function(P){return t.placeholder=P},style:x},l)}}],n&&B(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),w}(d().Component);se.propTypes={onVisible:s.PropTypes.func.isRequired,className:s.PropTypes.string,height:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string]),placeholder:s.PropTypes.element,threshold:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool,scrollPosition:s.PropTypes.shape({x:s.PropTypes.number.isRequired,y:s.PropTypes.number.isRequired}),width:s.PropTypes.oneOfType([s.PropTypes.number,s.PropTypes.string])},se.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const de=se;var g=p(296),T=p.n(g),X=p(96),y=p.n(X),k=function(o){var e=getComputedStyle(o,null);return e.getPropertyValue("overflow")+e.getPropertyValue("overflow-y")+e.getPropertyValue("overflow-x")};const U=function(o){if(!(o instanceof HTMLElement))return window;for(var e=o;e&&e instanceof HTMLElement;){if(/(scroll|auto)/.test(k(e)))return e;e=e.parentNode}return window};function I(o){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(o)}var R=["delayMethod","delayTime"];function J(){return J=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])}return o},J.apply(this,arguments)}function H(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,(h=function(b,w){if(I(b)!=="object"||b===null)return b;var t=b[Symbol.toPrimitive];if(t!==void 0){var r=t.call(b,"string");if(I(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(i.key),I(h)==="symbol"?h:String(h)),i)}var h}function re(o,e){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},re(o,e)}function K(o,e){if(e&&(I(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ae(o)}function ae(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function oe(o){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},oe(o)}var ce=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},D=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const ne=function(o){var e=function(n){(function(u,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(c&&c.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),Object.defineProperty(u,"prototype",{writable:!1}),c&&re(u,c)})(r,n);var i,h,b,w,t=(b=r,w=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var u,c=oe(b);if(w){var l=oe(this).constructor;u=Reflect.construct(c,arguments,l)}else u=c.apply(this,arguments);return K(this,u)});function r(u){var c;if(function(m,j){if(!(m instanceof j))throw new TypeError("Cannot call a class as a function")}(this,r),(c=t.call(this,u)).useIntersectionObserver=u.useIntersectionObserver&&M(),c.useIntersectionObserver)return K(c);var l=c.onChangeScroll.bind(ae(c));return u.delayMethod==="debounce"?c.delayedScroll=T()(l,u.delayTime):u.delayMethod==="throttle"&&(c.delayedScroll=y()(l,u.delayTime)),c.state={scrollPosition:{x:ce(),y:D()}},c.baseComponentRef=d().createRef(),c}return i=r,(h=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||U(E().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=U(E().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:ce(),y:D()}})}},{key:"render",value:function(){var u=this.props,c=(u.delayMethod,u.delayTime,function(m,j){if(m==null)return{};var x,P,z=function(Y,me){if(Y==null)return{};var ye,je,Ce={},_e=Object.keys(Y);for(je=0;je<_e.length;je++)ye=_e[je],me.indexOf(ye)>=0||(Ce[ye]=Y[ye]);return Ce}(m,j);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(m);for(P=0;P<C.length;P++)x=C[P],j.indexOf(x)>=0||Object.prototype.propertyIsEnumerable.call(m,x)&&(z[x]=m[x])}return z}(u,R)),l=this.useIntersectionObserver?null:this.state.scrollPosition;return d().createElement(o,J({forwardRef:this.baseComponentRef,scrollPosition:l},c))}}])&&H(i.prototype,h),Object.defineProperty(i,"prototype",{writable:!1}),r}(d().Component);return e.propTypes={delayMethod:s.PropTypes.oneOf(["debounce","throttle"]),delayTime:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool},e.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},e};function q(o){return q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(o)}function V(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,(h=function(b,w){if(q(b)!=="object"||b===null)return b;var t=b[Symbol.toPrimitive];if(t!==void 0){var r=t.call(b,"string");if(q(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(i.key),q(h)==="symbol"?h:String(h)),i)}var h}function W(o,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},W(o,e)}function $(o){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(o)}var ve=function(o){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&W(t,r)})(w,o);var e,n,i,h,b=(i=w,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,r=$(i);if(h){var u=$(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(c,l){if(l&&(q(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(c)}(this,t)});function w(t){return function(r,u){if(!(r instanceof u))throw new TypeError("Cannot call a class as a function")}(this,w),b.call(this,t)}return e=w,(n=[{key:"render",value:function(){return d().createElement(de,this.props)}}])&&V(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),w}(d().Component);const ge=ne(ve);function ue(o){return ue=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(o)}function we(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,(h=function(b,w){if(ue(b)!=="object"||b===null)return b;var t=b[Symbol.toPrimitive];if(t!==void 0){var r=t.call(b,"string");if(ue(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(b)}(i.key),ue(h)==="symbol"?h:String(h)),i)}var h}function he(o,e){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},he(o,e)}function F(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function Q(o){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(o)}var fe=function(o){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&he(t,r)})(w,o);var e,n,i,h,b=(i=w,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,r=Q(i);if(h){var u=Q(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(c,l){if(l&&(ue(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F(c)}(this,t)});function w(t){var r;(function(j,x){if(!(j instanceof x))throw new TypeError("Cannot call a class as a function")})(this,w),r=b.call(this,t);var u=t.afterLoad,c=t.beforeLoad,l=t.scrollPosition,m=t.visibleByDefault;return r.state={visible:m},m&&(c(),u()),r.onVisible=r.onVisible.bind(F(r)),r.isScrollTracked=!!(l&&Number.isFinite(l.x)&&l.x>=0&&Number.isFinite(l.y)&&l.y>=0),r}return e=w,(n=[{key:"componentDidUpdate",value:function(t,r){r.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var t=this.props,r=t.className,u=t.delayMethod,c=t.delayTime,l=t.height,m=t.placeholder,j=t.scrollPosition,x=t.style,P=t.threshold,z=t.useIntersectionObserver,C=t.width;return this.isScrollTracked||z&&M()?d().createElement(de,{className:r,height:l,onVisible:this.onVisible,placeholder:m,scrollPosition:j,style:x,threshold:P,useIntersectionObserver:z,width:C}):d().createElement(ge,{className:r,delayMethod:u,delayTime:c,height:l,onVisible:this.onVisible,placeholder:m,style:x,threshold:P,width:C})}}])&&we(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),w}(d().Component);fe.propTypes={afterLoad:s.PropTypes.func,beforeLoad:s.PropTypes.func,useIntersectionObserver:s.PropTypes.bool,visibleByDefault:s.PropTypes.bool},fe.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Ee=fe;function be(o){return be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(o)}var ze=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function ke(o,e){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);e&&(i=i.filter(function(h){return Object.getOwnPropertyDescriptor(o,h).enumerable})),n.push.apply(n,i)}return n}function Ie(o){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ke(Object(n),!0).forEach(function(i){Ue(o,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach(function(i){Object.defineProperty(o,i,Object.getOwnPropertyDescriptor(n,i))})}return o}function Ue(o,e,n){return(e=Re(e))in o?Object.defineProperty(o,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[e]=n,o}function Oe(){return Oe=Object.assign?Object.assign.bind():function(o){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o[i]=n[i])}return o},Oe.apply(this,arguments)}function He(o,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,Re(i.key),i)}}function Re(o){var e=function(n,i){if(be(n)!=="object"||n===null)return n;var h=n[Symbol.toPrimitive];if(h!==void 0){var b=h.call(n,"string");if(be(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(o);return be(e)==="symbol"?e:String(e)}function xe(o,e){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},xe(o,e)}function Pe(o){return Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pe(o)}var Se=function(o){(function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&xe(t,r)})(w,o);var e,n,i,h,b=(i=w,h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var t,r=Pe(i);if(h){var u=Pe(this).constructor;t=Reflect.construct(r,arguments,u)}else t=r.apply(this,arguments);return function(c,l){if(l&&(be(l)==="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}(c)}(this,t)});function w(t){var r;return function(u,c){if(!(u instanceof c))throw new TypeError("Cannot call a class as a function")}(this,w),(r=b.call(this,t)).state={loaded:!1},r}return e=w,(n=[{key:"onImageLoad",value:function(){var t=this;return this.state.loaded?null:function(r){t.props.onLoad(r),t.props.afterLoad(),t.setState({loaded:!0})}}},{key:"getImg",value:function(){var t=this.props,r=(t.afterLoad,t.beforeLoad,t.delayMethod,t.delayTime,t.effect,t.placeholder,t.placeholderSrc,t.scrollPosition,t.threshold,t.useIntersectionObserver,t.visibleByDefault,t.wrapperClassName,t.wrapperProps,function(u,c){if(u==null)return{};var l,m,j=function(P,z){if(P==null)return{};var C,Y,me={},ye=Object.keys(P);for(Y=0;Y<ye.length;Y++)C=ye[Y],z.indexOf(C)>=0||(me[C]=P[C]);return me}(u,c);if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(m=0;m<x.length;m++)l=x[m],c.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(u,l)&&(j[l]=u[l])}return j}(t,ze));return d().createElement("img",Oe({},r,{onLoad:this.onImageLoad()}))}},{key:"getLazyLoadImage",value:function(){var t=this.props,r=t.beforeLoad,u=t.className,c=t.delayMethod,l=t.delayTime,m=t.height,j=t.placeholder,x=t.scrollPosition,P=t.style,z=t.threshold,C=t.useIntersectionObserver,Y=t.visibleByDefault,me=t.width;return d().createElement(Ee,{beforeLoad:r,className:u,delayMethod:c,delayTime:l,height:m,placeholder:j,scrollPosition:x,style:P,threshold:z,useIntersectionObserver:C,visibleByDefault:Y,width:me},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(t){var r=this.props,u=r.effect,c=r.height,l=r.placeholderSrc,m=r.width,j=r.wrapperClassName,x=r.wrapperProps,P=this.state.loaded,z=P?" lazy-load-image-loaded":"",C=P||!l?{}:{backgroundImage:"url(".concat(l,")"),backgroundSize:"100% 100%"};return d().createElement("span",Oe({className:j+" lazy-load-image-background "+u+z,style:Ie(Ie({},C),{},{color:"transparent",display:"inline-block",height:c,width:m})},x),t)}},{key:"render",value:function(){var t=this.props,r=t.effect,u=t.placeholderSrc,c=t.visibleByDefault,l=t.wrapperClassName,m=t.wrapperProps,j=this.getLazyLoadImage();return(r||u)&&!c||l||m?this.getWrappedLazyLoadImage(j):j}}])&&He(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),w}(d().Component);Se.propTypes={onLoad:s.PropTypes.func,afterLoad:s.PropTypes.func,beforeLoad:s.PropTypes.func,delayMethod:s.PropTypes.string,delayTime:s.PropTypes.number,effect:s.PropTypes.string,placeholderSrc:s.PropTypes.string,threshold:s.PropTypes.number,useIntersectionObserver:s.PropTypes.bool,visibleByDefault:s.PropTypes.bool,wrapperClassName:s.PropTypes.string,wrapperProps:s.PropTypes.object},Se.defaultProps={onLoad:function(){},afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const qe=Se})(),We.exports=A})();var Ze=We.exports;class Le extends Z.Component{constructor(a){super(a),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const a=this.getParentElement(this.scrollComponent);a.scrollTop=a.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let a=!1;const p={get passive(){a=!0}};try{document.addEventListener("test",null,p),document.removeEventListener("test",null,p)}catch{}return a}eventListenerOptions(){let a=this.props.useCapture;return this.isPassiveSupported()?a={useCapture:this.props.useCapture,passive:!0}:a={passive:!1},a}setDefaultLoader(a){this.defaultLoader=a}detachMousewheelListener(){let a=window;this.props.useWindow===!1&&(a=this.scrollComponent.parentNode),a.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let a=window;this.props.useWindow===!1&&(a=this.getParentElement(this.scrollComponent)),a.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),a.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(a){const p=this.props.getScrollParent&&this.props.getScrollParent();return p??(a&&a.parentNode)}filterProps(a){return a}attachScrollListener(){const a=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!a)return;let p=window;this.props.useWindow===!1&&(p=a),p.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),p.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),p.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(a){a.deltaY===1&&!this.isPassiveSupported()&&a.preventDefault()}scrollListener(){const a=this.scrollComponent,p=window,A=this.getParentElement(a);let f;if(this.props.useWindow){const d=document.documentElement||document.body.parentNode||document.body,s=p.pageYOffset!==void 0?p.pageYOffset:d.scrollTop;this.props.isReverse?f=s:f=this.calculateOffset(a,s)}else this.props.isReverse?f=A.scrollTop:f=a.scrollHeight-A.scrollTop-A.clientHeight;f<Number(this.props.threshold)&&a&&a.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=A.scrollHeight,this.beforeScrollTop=A.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(a,p){return a?this.calculateTopPosition(a)+(a.offsetHeight-p-window.innerHeight):0}calculateTopPosition(a){return a?a.offsetTop+this.calculateTopPosition(a.offsetParent):0}render(){const a=this.filterProps(this.props),{children:p,element:A,hasMore:f,initialLoad:d,isReverse:s,loader:_,loadMore:E,pageStart:M,ref:v,threshold:S,useCapture:ee,useWindow:B,getScrollParent:L,...te}=a;te.ref=pe=>{this.scrollComponent=pe,v&&v(pe)};const G=[p];return f&&(_?s?G.unshift(_):G.push(_):this.defaultLoader&&(s?G.unshift(this.defaultLoader):G.push(this.defaultLoader))),Ae.createElement(A,te,G)}}Te(Le,"propTypes",{children:ie.node.isRequired,element:ie.node,hasMore:ie.bool,initialLoad:ie.bool,isReverse:ie.bool,loader:ie.node,loadMore:ie.func.isRequired,pageStart:ie.number,ref:ie.func,getScrollParent:ie.func,threshold:ie.number,useCapture:ie.bool,useWindow:ie.bool}),Te(Le,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});const nt=Z.memo(({images:N,fetchMoreImages:a})=>{const{user:p}=Z.useContext(Ve),[A,f]=Z.useState(!1),[d,s]=Z.useState(null),[_,E]=Z.useState(null),M=(B,L)=>{v()&&(s(B),E(L),f(!0))},v=()=>p?!0:(Ge.error("You must sign in to view image details."),!1),S=Z.useCallback(B=>{let L=B;return L.includes("?q")&&(L=L.replace(/(\?|&)q=[^&]*/,"$1q=80")),L=L.replace(/(\?|&)fm=[^&]*/,"$1fm=webp"),L},[]),ee=Z.useCallback(()=>O.jsx("div",{className:"image-grid",children:N.map((B,L)=>O.jsx("div",{className:"image-wrapper",children:O.jsx(Ze.LazyLoadImage,{effect:"blur",loading:"lazy",src:S(B.urls.regular),alt:B.alt_description||"Image from Unsplash",className:"image",onClick:()=>M(B.id,S(B.urls.regular)),width:300,height:300})},L))}),[N,S,M]);return O.jsxs(O.Fragment,{children:[O.jsx(Le,{pageStart:0,loadMore:a,hasMore:!0,loader:O.jsx("div",{children:"Loading..."},0),children:ee()}),O.jsx(Qe,{show:A,onHide:()=>f(!1),id:d,srcImage:_})]})});export{nt as default};
